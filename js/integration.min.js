function a(a,b,c,d,e,f){var g=document.createElement(a);g.className=b;g.textContent=c;if(a=='input'){g.type=d;g.placeholder=e;g.name=f}else a=='textarea'?g.name=f:a=='button'&&(g.type='submit');g.required=!0;return g}var b='rcs-form',c='rcs-formRow',d='rcs-formCol',e='rcs-inputLabel',f='rcs-inputText',g='rcs-textRight',h='rcs-btn',i='rcs-btnGreen',k=a('form',b,''),l=a('div',c,''),m=a('div',d,''),p=a('div',d,''),s=a('div',c,''),t=a('div',d,''),w=a('div',d,''),z=a('div',c,''),_=a('div',d,''),aB=a('div',c,''),aC=a('div',`${d} ${g}`,''),aE=document.getElementById('resourcex-customer-support-form'),aF="rcs-notice",aG=document.createElement('div');m.appendChild(a('div',e,'Your Name'));m.appendChild(a('input',f,'','text','John Doe','name'));l.appendChild(m);p.appendChild(a('div',e,'Your Email'));p.appendChild(a('input',f,'','email','johndoe@example.com','email'));l.appendChild(p);k.appendChild(l);t.appendChild(a('div',e,'Model #'));t.appendChild(a('input',f,'','text','MRM-3242','model_id'));s.appendChild(t);w.appendChild(a('div',e,'Part #'));w.appendChild(a('input',f,'','text','optional','part_id'));s.appendChild(w);k.appendChild(s);_.appendChild(a('div',e,'Question'));_.appendChild(a('textarea','','','','','question_text'));z.appendChild(_);k.appendChild(z);aC.appendChild(a('button',`${h} ${i}`,'Submit'));aB.appendChild(aC);k.appendChild(aB);aE.appendChild(k);aG.className=aF;aG.innerText="Your question has been received and will be answered by agent within 24 hours.";aE.prepend(aG);k.addEventListener('submit',e=>{e.preventDefault();aG.className=aF;document.getElementsByClassName(h)[0].disabled=!0;fetch('https://customer-support-public-api.resourcex.co/api/v1/public_ticket/create',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:aH('name'),email:aH('email'),model_id:aH('model_id'),part_id:aH('part_id'),question_text:aH('question_text'),site_product_id:aE.dataset.productId})}).then(response=>response.json()).then(()=>{aG.className=`${aF} success`;document.getElementsByClassName('rcs-btn')[0].disabled=!1}).catch(()=>{aG.className=`${aF} error`;aG.innerText='Failed to submit question, please try again...';document.getElementsByClassName('rcs-btn')[0].disabled=!1})});function aH(A){var B=document.querySelector(`[name="${A}"]`);return B.value}function aI(){fetch(`https://customer-support-public-api.resourcex.co/api/v1/public_ticket?site_product_id=${aE.dataset.productId}`).then(response=>response.json()).then(A=>{var B=document.getElementById('resourcex-customer-support-tickets');for(const _a of A){var D=document.createElement('div'),_b=a('form',b),_c=a('div',c),_d=a('div',d),E=a('div',d),F=a('div',c),G=a('div',d),H=a('div',c),I=a('div',d),j=a('input',f,'','hidden','','question_id'),K=a('input',f,'','hidden','','redirect'),n=a('textarea','','','','','comment_text'),o=a('button',`${h} ${i}`,'Submit');D.className='rcs-ticket';D.innerText=`Ticket #${_a.id}: ${_a.question_text}`;B.appendChild(D);for(const _A of _a.comments){var aA=document.createElement('div'),_B=document.createElement('div'),_C=document.createElement('span'),C={weekday:'long',year:'numeric',month:'long',day:'numeric'},_D=document.createElement('div');aA.className=_A.user_type=='agent'?'rcs-comment rcs-comment-agent':'rcs-comment';_B.className='rcs-comment-header';_C.className='rcs-comment-date';_C.innerText=new Date(_A.timestamp.replace(' ','T')).toLocaleDateString('en-US',C);_B.appendChild(_C);_D.className='rcs-comment-body';_D.innerText=_A.comment_text;aA.appendChild(_B);aA.appendChild(_D);D.appendChild(aA)}_b.method='POST';_b.action='https://customer-support-public-api.resourcex.co/api/v1/public_ticket/comment';j.value=_a.id;K.value=window.location.href;n.placeholder="Add a comment...";n.required=!0;o.type='submit';_d.appendChild(a('input',f,'','text','John Doe','name'));E.appendChild(a('input',f,'','email','john@example.com','email'));_c.appendChild(_d);_c.appendChild(E);G.appendChild(n);F.appendChild(G);I.appendChild(o);I.appendChild(j);I.appendChild(K);H.appendChild(I);_b.appendChild(_c);_b.appendChild(F);_b.appendChild(H);D.appendChild(_b)}}).catch(error=>console.log(error))}aI();
