function a(a,b,c,d,e,f){var g=document.createElement(a);g.className=b;g.textContent=c;if(a=='input'){g.type=d;g.placeholder=e;g.id=f}else a=='textarea'?g.id=f:a=='button'&&(g.type='submit');g.required=!0;return g}var c='rcs-formRow',d='rcs-formCol',e='rcs-inputLabel',f='rcs-inputText',g='rcs-textRight',h='rcs-btn',i='rcs-btnGreen',k=a('form','rcs-form',''),l=a('div',c,''),m=a('div',d,''),p=a('div',d,''),s=a('div',c,''),t=a('div',d,''),w=a('div',d,''),z=a('div',c,''),_=a('div',d,''),aB=a('div',c,''),aC=a('div',`${d} ${g}`,''),aE=document.getElementById('resourcex-customer-support-form'),aF="rcs-notice",aG=document.createElement('div');m.appendChild(a('div',e,'Your Name'));m.appendChild(a('input',f,'','text','John Doe','name'));l.appendChild(m);p.appendChild(a('div',e,'Your Email'));p.appendChild(a('input',f,'','email','johndoe@example.com','email'));l.appendChild(p);k.appendChild(l);t.appendChild(a('div',e,'Model #'));t.appendChild(a('input',f,'','text','MRM-3242','model_id'));s.appendChild(t);w.appendChild(a('div',e,'Part #'));w.appendChild(a('input',f,'','text','optional','part_id'));s.appendChild(w);k.appendChild(s);_.appendChild(a('div',e,'Question'));_.appendChild(a('textarea','','','','','question_text'));z.appendChild(_);k.appendChild(z);aC.appendChild(a('button',`${h} ${i}`,'Submit'));aB.appendChild(aC);k.appendChild(aB);aE.appendChild(k);aG.className=aF;aG.innerText="Your question has been received and will be answered by agent within 24 hours.";aE.prepend(aG);k.addEventListener('submit',e=>{e.preventDefault();aG.className=aF;document.getElementsByClassName(h)[0].disabled=!0;fetch('https://customer-support-public-api.resourcex.co/api/v1/public_ticket/create',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:aH('name'),email:aH('email'),model_id:aH('model_id'),part_id:aH('part_id'),question_text:aH('question_text'),site_product_id:aE.dataset.productId})}).then(response=>response.json()).then(()=>{aG.className=`${aF} success`;document.getElementsByClassName('rcs-btn')[0].disabled=!1}).catch(()=>{aG.className=`${aF} error`;aG.innerText='Failed to submit question, please try again...';document.getElementsByClassName('rcs-btn')[0].disabled=!1})});function aH(A){var b=document.getElementById(A);return b.value}function aI(){fetch(`https://customer-support-public-api.resourcex.co/api/v1/public_ticket?site_product_id=${aE.dataset.productId}`).then(response=>response.json()).then(A=>{var b=document.getElementById('resourcex-customer-support-tickets');for(const C of A){var _a=document.createElement('div');_a.className='rcs-ticket';_a.innerText=`Ticket #${C.id}: ${C.question_text}`;b.appendChild(_a);for(const D of C.comments){var _A=document.createElement('div'),_b=document.createElement('div'),_c=document.createElement('span'),B={weekday:'long',year:'numeric',month:'long',day:'numeric'},_d=document.createElement('div');_A.className=D.user_type=='agent'?'rcs-comment rcs-comment-agent':'rcs-comment';_b.className='rcs-comment-header';_c.className='rcs-comment-date';_c.innerText=new Date(D.timestamp.replace(' ','T')).toLocaleDateString('en-US',B);_b.appendChild(_c);_d.className='rcs-comment-body';_d.innerText=D.comment_text;_A.appendChild(_b);_A.appendChild(_d);_a.appendChild(_A)}}}).catch(error=>console.log(error))}aI();
